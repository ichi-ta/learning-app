<!DOCTYPE html>
<html lang="jp">
<head>
    <meta charset="UTF-8">
    <title>問題一覧</title>
</head>
<body>
  <a href="/top">トップに戻る</a>
  <form action="/sets" method="POST">
    <div>
        セット名:<input name="set_name"></input>
    </div>
    <div>
        <input type="submit" value="問題作成">
    </div>
  </form>

  <h1>セット一覧</h1>
  {% with messages = get_flashed_messages() %}
    {% if messages %}
        <ul class=flashes>
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
        </ul>
    {% endif %}
  {% endwith %}
    <table>
    <tr>
      <th >セット名</th>
      <th >作成者名</th>
    </tr>
    {% for set in sets %}
    <tr>
      <td>
        <a href="{{ url_for('sets.set_detail', set_id=set.id) }}">{{ set.name }}</a>
      </td>
      <td>{{ set.user.name }}</td>
      <td>
        <form action="{{ url_for('sets.delete_set', set_id=set.id) }}" method="POST">
          <input type="submit" value="削除">
        </form>
      </td>
    </tr>
    {% endfor %}
    </table>

    <!-- roleがTrue(先生)の場合のみ生徒の解答を表示 -->
    {% if current_user.role == True %}
        <table class="table">
            <thead>
                <tr>
                    <th>問題</th>
                    <th>答え</th>
                </tr>
            </thead>
            <tbody>
                {% for question, answer in questions_and_answers %}
                <tr>
                    <td>{{ question.sentence }}</td>
                    <td>{{ answer }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% endif %}
</body>
</html>